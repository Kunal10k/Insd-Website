<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Scroll Gallery with Fullwidth Video</title>
<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background: #f6f7fb;
    overflow-x: hidden;
  }

  .spacer { height: 90vh; }

  .gallery-wrap {
    position: relative;
    height: 160vh;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .gallery {
    position: relative;
    width: fit-content;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .img-card {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    border-radius: 12px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    transition: all 1s ease;
    z-index: 1;
  }

  .img-left, .img-right {
    width: 220px;
    opacity: 0;
  }

  .video-card {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 320px;
    border-radius: 12px;
    overflow: hidden;
    transition: all 1s ease;
    z-index: 2;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  }

  .video-card video {
    width: 100%;
    height: auto;
    display: block;
  }

  .caption {
    position: absolute;
    bottom: -40px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 14px;
    color: #666;
  }

  @media (max-width: 768px) {
    .img-left, .img-right { width: 150px; }
    .video-card { width: 220px; }
  }
</style>
</head>
<body>

<div class="spacer"></div>

<section class="gallery-wrap">
  <div class="gallery" id="gallery">

    <!-- Left Image -->
    <img src="https://images.unsplash.com/photo-1503023345310-bd7c1de61c7d?w=800&q=60&auto=format&fit=crop"
         class="img-card img-left" id="leftImg">

    <!-- Center Video -->
    <div class="video-card" id="centerVideo">
      <video muted autoplay loop playsinline poster="https://images.unsplash.com/photo-1549880338-65ddcdfd017b?w=1200&q=60&auto=format&fit=crop">
        <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
      </video>
    </div>

    <!-- Right Image -->
    <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?w=800&q=60&auto=format&fit=crop"
         class="img-card img-right" id="rightImg">

    <div class="caption">Scroll down â€” video expands full width</div>
  </div>
</section>

<div class="spacer"></div>

<script>
const leftImg = document.getElementById('leftImg');
const rightImg = document.getElementById('rightImg');
const videoCard = document.getElementById('centerVideo');
const gallery = document.getElementById('gallery');

function updateGallery() {
  const rect = gallery.getBoundingClientRect();
  const windowHeight = window.innerHeight;
  const inView = rect.top < windowHeight * 0.7 && rect.bottom > windowHeight * 0.3;

  if (inView) {
    // Left/right images slide and fade out
    leftImg.style.opacity = '0';
    rightImg.style.opacity = '0';
    leftImg.style.transform = 'translateY(-50%) translateX(-200px)';
    rightImg.style.transform = 'translateY(-50%) translateX(200px)';

    // Video expands to full screen width
    videoCard.style.position = 'fixed';
    videoCard.style.top = '50%';
    videoCard.style.left = '50%';
    videoCard.style.transform = 'translate(-50%, -50%)';
    videoCard.style.width = '100vw';
    videoCard.style.height = '56.25vw'; // 16:9 aspect ratio
    videoCard.style.maxHeight = '100vh';
    videoCard.style.borderRadius = '0';
    videoCard.style.zIndex = '10';
    videoCard.style.boxShadow = 'none';
  } else {
    // Reset back to normal small layout
    leftImg.style.opacity = '0';
    rightImg.style.opacity = '0';
    leftImg.style.transform = 'translateY(-50%) translateX(0)';
    rightImg.style.transform = 'translateY(-50%) translateX(0)';

    videoCard.style.position = 'absolute';
    videoCard.style.top = '50%';
    videoCard.style.left = '50%';
    videoCard.style.transform = 'translate(-50%, -50%)';
    videoCard.style.width = '320px';
    videoCard.style.height = 'auto';
    videoCard.style.borderRadius = '12px';
    videoCard.style.zIndex = '2';
    videoCard.style.boxShadow = '0 8px 20px rgba(0,0,0,0.15)';
  }
}

window.addEventListener('scroll', updateGallery);
window.addEventListener('resize', updateGallery);
updateGallery();
</script>

</body>
</html>
